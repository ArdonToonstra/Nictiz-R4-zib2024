<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="zib-AnatomicalLocation" />
  <text>
    <status value="empty" /><div xmlns="http://www.w3.org/1999/xhtml">No narrative is provided for definitional resources. A human-readable rendering can be found in the implementation guide(s) where this resource is used.</div></text>
  <url value="http://nictiz.nl/fhir/StructureDefinition/zib-AnatomicalLocation" />
  <name value="ZibAnatomicalLocation" />
  <title value="zib AnatomicalLocation" />
  <status value="draft" />
  <publisher value="Nictiz" />
  <contact>
    <name value="Nictiz" />
    <telecom>
      <system value="url" />
      <value value="https://www.nictiz.nl" />
      <use value="work" />
    </telecom>
  </contact>
  <description value="An anatomical location specifies the location (e.g. foot) and laterality (e.g. left) of a body part." />
  <purpose value="This CodeableConcept resource represents Location concept of the Dutch [zib ('Zorginformatiebouwsteen', i.e. Health and Care Information Model) AnatomicalLocation v1.0.3 (2024)](https://zibs.nl/wiki/AnatomicalLocation-v1.0.3(2024EN)). The zib AnatomicalLocation is mapped to both a profile on BodyStructure (&lt;http://nictiz.nl/fhir/StructureDefinition/zib-AnatomicalLocation-BodyStructure&gt;) and this CodeableConcept profile. The CodeableConcept handles the representation of the location, while the BodyStructure profile covers both location and laterality.&#xD;&#xA;&#xD;&#xA;Profilers can use this profile in places where zib AnatomicalLocation is instantiated." />
  <copyright value="Copyright and related rights waived via CC0, https://creativecommons.org/publicdomain/zero/1.0/. This does not apply to information from third parties, for example a medical terminology system. The implementer alone is responsible for identifying and obtaining any necessary licenses or authorizations to utilize third party IP in connection with the specification or otherwise." />
  <fhirVersion value="4.0.1" />
  <mapping>
    <identity value="zib-anatomicallocation-v1.0.3-2024EN" />
    <uri value="https://zibs.nl/wiki/AnatomicalLocation-v1.0.3(2024EN)" />
    <name value="zib AnatomicalLocation-v1.0.3(2024EN)" />
  </mapping>
  <kind value="complex-type" />
  <abstract value="true" />
  <type value="CodeableConcept" />
  <baseDefinition value="http://hl7.org/fhir/StructureDefinition/CodeableConcept" />
  <derivation value="constraint" />
  <differential>
    <element id="CodeableConcept">
      <path value="CodeableConcept" />
      <short value="Location" />
      <definition value="Localisation on/in the body." />
      <comment value="In cases where only the anatomical location need to be conveyed, or where laterality is embedded within the location code, this CodeableConcept can be used within the resource. However, when laterality needs to be explicitly recorded, the BodyStructure resource should be used, referenced through the BodyStructure Reference within this CodeableConcept. If the BodyStructure reference is used, this CodeableConcept should either remain empty or align with the `BodyStructure.location` element.&#xD;&#xA;&#xD;&#xA;**Note:** Receiving systems must support both this CodeableConcept and the BodyStructure resource, as either mechanism may be employed. The rationale for this is that, in many cases, only the location will be required, simplifying the FHIR recording process for sending systems." />
      <alias value="Locatie" />
      <constraint>
        <key value="zib-AnatomicalLocation-1" />
        <severity value="error" />
        <human value="If a code is used to represent an anatomical location, at least one code must be present from the code systems bound to the location concept." />
        <expression value="descendants().where($this.is(Coding)).exists() implies descendants().where($this.is(Coding)).where(system = 'http://snomed.info/sct' or system = 'urn:oid:2.16.840.1.113883.6.43.1').exists()" />
      </constraint>
      <mapping>
        <identity value="zib-anatomicallocation-v1.0.3-2024EN" />
        <map value="NL-CM:20.7.4" />
        <comment value="Location" />
      </mapping>
    </element>
    <element id="CodeableConcept.extension:bodyStructureReference">
      <path value="CodeableConcept.extension" />
      <sliceName value="bodyStructureReference" />
      <type>
        <code value="Extension" />
        <profile value="http://hl7.org/fhir/StructureDefinition/bodySite" />
      </type>
      <isModifier value="false" />
    </element>
    <element id="CodeableConcept.extension:bodyStructureReference.value[x]">
      <path value="CodeableConcept.extension.value[x]" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/zib-AnatomicalLocation-BodyStructure" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/BodyStructure" />
      </type>
    </element>
    <element id="CodeableConcept.coding">
      <path value="CodeableConcept.coding" />
      <slicing>
        <discriminator>
          <type value="value" />
          <path value="$this" />
        </discriminator>
        <rules value="open" />
      </slicing>
      <comment value="A deviation from our general profiling has been implemented in this profile. Slicing has been applied to `CodeableConcept.coding` to enable the use of the `BodyStructure` reference extension without requiring a populated coded value. This approach facilitates scenarios where only the Laterality element needs to be conveyed.&#xA;&#xA;The decision was made due to the Location conceptâ€™s required binding strength. If the required binding were applied on the CodeableConcept, it would mandate a coded value. This slicing approach ensures flexibility while maintaining compliance with the required binding constraints for Location." />
      <condition value="zib-AnatomicalLocation-1" />
    </element>
    <element id="CodeableConcept.coding:location">
      <path value="CodeableConcept.coding" />
      <sliceName value="location" />
      <short value="Location" />
      <definition value="Location on/in the body." />
      <alias value="Locatie" />
      <max value="1" />
      <binding>
        <strength value="required" />
        <valueSet value="http://decor.nictiz.nl/fhir/ValueSet/2.16.840.1.113883.2.4.3.11.60.121.11.11--20240415000000" />
      </binding>
      <mapping>
        <identity value="zib-anatomicallocation-v1.0.3-2024EN" />
        <map value="NL-CM:20.7.4" />
        <comment value="Location" />
      </mapping>
    </element>
  </differential>
</StructureDefinition>